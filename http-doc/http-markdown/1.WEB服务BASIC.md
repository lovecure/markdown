# WEB服务BASIC

## 总结
### 一、静态网站、动态网站
* 静态网站每个网页都有URL，并且网页全部在客户端解析,不使用数据库，不交互，维护成本高,易被搜索引擎收录
<br>
</br>
* 动态网站网页全部在服务器端解析,消耗资源，以数据库为基础，不易被搜索引擎收录，运维需要转换为静态网站提高访问性能(其他技术:==URL重写==、伪静态->损耗性能，用于SEO收录)
<br>
</br>
* B2C、BBS、电商动态转静态涉及:<mark>异步，消息中间件、消息队列</mark>
![](http://ozxcyqizw.bkt.clouddn.com/WEB%E9%9B%86%E7%BE%A4%E5%BC%82%E6%AD%A5%E6%9E%B6%E6%9E%84%E5%9B%BE.jpg)

<br>
</br>
<br>
</br>
### 二、IP、PV、UV与并发访问
* IP: ``0:00~23:59`` 由于宽带NAT问题使用IP来衡量网站访问量是比较保守的
<br>
</br>
* PV: 是浏览某网站的页面数,客户端请求页面服务器回复一个页面的动作为一个PV,可以==反映出网站的并发量==
		``按天统计PV	0:00~23:59 IP总数*每IP的PV``
<br>
</br>
* UV:使用``cookie``或``客户端标识别``来区别独立的自然人访问,反映比较真实
<br>
</br>
* 并发访问:一台服务器在一个时间周期内有多少人访问，等同于服务器同时接纳的人数
``按天统计并发量	0:00~23:59 总PV/86400=每秒并发访问量/s``
<br>
</br>
* 老家肉饼例子理解:单位时间内并发访问

---
<br>
</br>
<br>
</br>
<br>
</br>
<br>
</br>
<br>
</br>

## BASIC
### 一、静态网页特点

 1. 所有程序在客户端解析
 2. 没有后台数据库、不含交互，编写是什么显示的就是什么, 用于展示页
 3. 维护成本高
 4. 扩展名一般为：htm,html,xml,shtml,jpg,js,css,swf......


> <pre>
 静态网页每个页面都有一个固定URL
 静态网页实实在在存放在服务器中，每个网页都是一个独立的文件
 静态网页内容稳定，容易被seo收录
   </pre>

<br>
</br>

### 二、动态网页的特点

  1. 扩展名一般为:asp,aspx,php,jsp,do,cgi,perl......
  2. 以数据库为基础，增减内容直接修改数据库，降低网站维护的工作量   
  3. 动态网站并不是独立存储的网页文件
  4. 因为URL中包含“？”等字符所以搜索引擎收录存在一定问题，可以把动态网页通过伪静态方式适应抓取要求
  5. 所有程序在服务器端解析，因此消耗CPU等资源，效率不如静态网页，运维的工作是将动态网页转换为静态网站

> 
<pre>
伪静态只能有利于搜索引擎收录效果，不会提升网站访问效率反而会影响性能
主流的技术是rewrite URL地址重写
如果追求性能可以将动态网站转换为静态网站，性能比率为10:1
更新频率快的网站不适合动态转静态
</pre>

<br>
</br>

#### (1)伪静态小结


1. 动态网页伪装成静态
2. 目的便于搜索引擎收录提升用户访问量和体验
3. 由于是伪装成静态，实际还是动态,性能未能提升反而下降，因为需要转换
4. 尽可能转换成真正的静态页面

<br>
</br>


#### (2)高并发网站架构动态转静态不用业务产品实现案例

  1. 门户新闻业务（一旦发布，几乎不会改动）
 
   编辑人员发布新闻由程序自动转换为静态，静态内容同步到全国CDN服务器节点


  2. 视频网站业务（一旦发布，几乎不会改动）
    
   用户上传视频-审核-转码-推送（内容同步到全国CDN节点）


  3. blog/bbs/sns/电商(B2C) <<------较难,含金量高

    异步，消息中间件、消息队列

<br>
</br>
___
<br>
</br>
<br>



### 三、IP PV UV 概念

#### 1. IP
是指独立的IP数，不同IP地址访问网站的总数，0:00-24:00内相同IP地址被计算为一次

	例：赶集网 日300万IP，至少300万人访问
>独立IP数度量网站访问量不是很精确，取决于国内为NAT方式访问互联网，一个独立IP背后可能有很多客户端访问

<br>
</br>


#### 2. PV （page view）页面浏览
<pre>			      	  
 PV:
   
  				      请求	
			browser  ------> server
			      
			           回复
			browser  <-————- server      
			
 为一个PV

</pre>



  PV是反映浏览某网站的页面数，PV不一定是网页来访者数量，而是网站被访问的页面数量

>  例：一个用户访问赶集网，产生多少PV？              
> 	答：大概几个到几十个 
  
>  例：赶集网日IP300万，估计PV数为:3000万+

>  PV是网站被访问的页面数量的一个指标，但无法估计有多少人来访问，可以用PV来衡量网站访问流量、并发

<br>
</br>


#### 3. IP/PV度量

(1) PV的度量
 
 1. 分析web服务的访问日志(排除js,css,各种图片，html,php)
 2. 在所有页面结尾嵌入js程序（GA）传给统计服务器
 3. 用第三方大家比较信任的统计工具
</br>
<br>

(2) IP的度量

 1. 分析web服务器的访问日志，去重uniq
 2. 在所有页面结尾嵌入js程序（GA）传给统计服务器
 3. 用第三方大家比较信任的统计工具




<br>
</br>



#### 4. UV （unique visitor）独立访客

访问网站的一台PC或是移动终端，独立的自然人访问，一人0:00-24:00访问，记录一个UV
<br>
</br>

(1) UV的度量

1. 网站服务器分辨（IP、时间、浏览器、操作系统版本）满足相同特征判断为一个UV
>  问题:1.多个人电脑软硬件雷同 2.多人共用一个电脑


2. <mark>***Cookie***</mark>
>服务器会颁发一个编号独一无二的cookie给客户端（访问时间，访问那个页面）通过编号来判断是否为同一个visit


<br>
</br>

#### 5. IP、PV、UV区别

<pre>
1. IP是按照出口外网地址来计算，IP高访问量就高，由于宽带NAT原因IP数量小于访问量不是很准确

2. 因存在刷PV的情况,PV高不一定是来访者多，但PV与来访者是成正比的，PV可以决定用户访问网站页面的总数量，PV越高服务器压力越大

3. UV是个一个自然人来访问网站,通过用户标识与cookie来区别不同的用户,反映较真实</pre>


<br>
</br>

#### 6. 并发访问


1.并发访问

	一台服务器同时多少人访问

<br>
</br>


2.按天统计，计算5000万PV并发量
		
	网站的最高并发，每秒最低为:5000万/86400=5787并发/秒

<br>
</br>
3.并发访问对于运维很重要

	等同于服务器同时接纳的人数

<br>
</br>
4.什么是并发？如何理解？

	例子： 老家肉饼吃饭可容纳21桌，每桌4人，理论并发21*4个并发
      	  每个并发平均15分钟结束，每个15分钟并发数为84个

<mark>单位时间内(因为有的请求1秒结束，有的10秒才结束)服务器能够同时处理的最大连接数(正在接受的和已经处理的)</mark>



